(function(){function e(e){return e instanceof y.selection?e:y.select(e)}function t(e,t,n){n.forEach(function(n){e[n]=function(r){return arguments.length?(t[n]=r,e):t[n]}})}function n(e,t,n){e[t]=function(){var t=h(arguments);return t.length?(t=m(t[0])?t[0]:t,n.forEach(function(n,r){e[n](t[r])}),e):n.map(function(t){return e[t]()})}}function r(e,t){return p(t).forEach(function(n){e[n]=t[n]}),e}function i(e,t){return v(t)&&p(t).forEach(function(n){d(b[n])&&e[n](t[n])}),e}function s(e){return e.charAt(0).toUpperCase()+e.slice(1)}function o(e){var t=s(e);return function(e){return Object.prototype.toString.call(e)==="[object "+t+"]"}}function u(e){return e===undefined}function a(e){return function(t){return t[e]}}function f(e,t){return function(n){return e(t(n))}}function l(e,t){var n=t?e.value().map(t):e.domain();return n[0]instanceof Date?y.time.scale().domain(y.extent(n)):typeof n[0]=="string"?y.scale.ordinal().domain(n):y.scale.linear().domain(y.extent(n))}function c(e){var t=b.baseSize(),n=b.margins();return{top:t[0]*(e.top?+e.top():0)+n,left:t[1]*(e.left?+e.left():0)+n,height:t[0]*+e.height()-n*2,width:t[1]*+e.width()-n*2}}var h=Function.prototype.call.bind(Array.prototype.slice),p=Object.keys,d=o("function"),v=o("object"),m=Array.isArray,g=this,y=g.d3,b={version:"0.1.0"},w={baseWidth:1,baseHeight:1,margins:0};t(b,w,p(w)),n(b,"baseSize",["baseHeight","baseWidth"]),b.config=function(e){return arguments.length?i(b,e):r({},w)};var E=[];b.defineElement=function(r,s){if(b[r])throw new Error("Attempting to define element that already exists or is protected: '"+r+"'");E.push(r),b[r]=function(o){var u,a={height:200,width:200},f=function(t){var n=c(f),i=e(t).append("div");return i.classed("element element-"+r,!0).style("height",n.height+"px").style("width",n.width+"px"),f.header()&&i.append("header").html(f.header()),i.append("div").classed("content",!0).call(u),f.footer()&&i.append("footer").html(f.footer()),f};return f.render=f,t(f,a,["metric","width","height","header","footer"]),n(f,"size",["height","width"]),u=s(f),i(f,o)}},b.group=function(){var r,i=[];return r=function(t){var n=e(t).append("div").classed("informant group",!0).style("position","relative");return i.forEach(function(e){var t=c(e),r=n.append("div");r.style("position","absolute").style("top",t.top+"px").style("left",t.left+"px").classed("wrapper",!0).call(e),e.id()&&r.attr("id",e.id()),e.classes()&&r.classed(e.classes(),!0)}),n},E.forEach(function(e){r[e]=function(s){var o=b[e](s),u={top:0,left:0};return i.push(o),t(o,u,["id","classes","top","left"]),n(o,"position",["top","left"]),o.end=function(){return r},o}}),r.render=r,r},b.defineElement("number",function(e){return function(t){var n=e.metric(),r=t.append("div").classed("value",!0);n.on("change",function(){r.text(n.value())})}}),b.defineElement("list",function(e){var n={numbered:!1,accessor:a("key")};return t(e,n,["numbered","accessor"]),function(t){var n=e.metric(),r=e.accessor(),i=t.append(e.numbered()?"ol":"ul");n.on("change",function(){var t=i.selectAll("li").data(n.value());t.enter().append("li"),t.text(r).classed("selected",function(e){return r(e)===n.filter()}).on("click",function(e){n.filter(r(e)===n.filter()?null:e.key),dc&&dc.redrawAll()}),t.exit().remove()})}}),b.defineElement("graph",function(e){return function(t){var n=e.metric(),r=c(e),i=t.append("div").classed("chart line-chart",!0);n.on("ready",function(){var t=dc.lineChart(i.node()).width(r.width-40).height(r.height-140).margins({top:10,right:10,bottom:30,left:50}).dimension(n.dimension()).group(n.group()).x(l(n));t.elasticY(!0).renderHorizontalGridLines(!0).brushOn(!1).renderArea(!0),t.xAxis().ticks(y.time.days).tickFormat(function(e){return e.getMonth()+1+"/"+e.getDate()}),t.render()})}}),b.defineElement("bar",function(e){return function(t){var n=e.metric(),r=c(e),i=t.append("div").classed("chart bar-chart",!0);n.on("ready",function(){var t=dc.barChart(i.node()).width(r.width-40).height(r.height-140).margins({top:10,right:10,bottom:30,left:60}).dimension(n.dimension()).group(n.group()).x(l(n)).xUnits(dc.units.ordinal);t.elasticY(!0).centerBar(!0).renderHorizontalGridLines(!0).brushOn(!1),t.render()})}}),b.defineElement("pie",function(e){var n={donut:!1};return t(e,n,["donut"]),function(t){var n=e.metric(),r=c(e),i=t.append("div").classed("chart pie-chart",!0);n.on("ready",function(){var s=r.width/2-60,o=s*2+6,u=y.scale.linear().domain([0,n.group().size()-1]).range(["rgba(0,0,0,0.2)","rgba(0,0,0,0.7)"]),a=dc.pieChart(i.node()).width(o).height(o).radius(s).dimension(n.dimension()).group(n.group());e.donut()&&a.innerRadius(s/3),a.minAngleForLabel(.05);var f=[];for(var l=0,c=n.group().size();l<c;l++)f.push(l);a.colors(f.map(u)),a.render()})}}),b.defineElement("bubble",function(e){var n=a("value"),r={keyAccessor:"key",valueAccessor:"value",radiusAccessor:"radius"};return t(e,r,["keyAccessor","valueAccessor","radiusAccessor"]),function(t){var r=e.metric(),i=c(e),s=f(a(e.keyAccessor()),n),o=f(a(e.valueAccessor()),n),u=f(a(e.radiusAccessor()),n),h=t.append("div").classed("chart bubble-chart",!0);r.on("ready",function(){var t=dc.bubbleChart(h.node()).width(i.width-40).height(i.height-140).margins({top:10,right:50,bottom:30,left:50}).dimension(r.dimension()).group(r.group()).x(l(r,s)).y(l(r,o)).r(l(r,u)).keyAccessor(s).valueAccessor(o).radiusValueAccessor(u);t.colors(y.scale.category20c()).maxBubbleRelativeSize(.09).renderLabel(!0).elasticX(!0).elasticY(!0).renderHorizontalGridLines(!0).renderVerticalGridLines(!0).brushOn(!1),t.render()})}}),g.informant=b})();