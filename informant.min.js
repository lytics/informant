(function(){function e(e){return e instanceof b.selection?e:b.select(e)}function t(e,t,n){n.forEach(function(n){e[n]=function(r){return arguments.length?(t[n]=r,e):t[n]}})}function n(e,t,n){e[t]=function(){var t=p(arguments);return t.length?(t=g(t[0])?t[0]:t,n.forEach(function(n,r){e[n](t[r])}),e):n.map(function(t){return e[t]()})}}function r(e){e.element=function(t,n){if(S.indexOf(t)===-1)throw new Error("Unknown element type: '"+t+"'");return e[t](n)}}function i(e,t){return d(t).forEach(function(n){e[n]=t[n]}),e}function s(e,t){return m(t)&&d(t).forEach(function(n){v(w[n])&&e[n](t[n])}),e}function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function u(e){var t=o(e);return function(e){return Object.prototype.toString.call(e)==="[object "+t+"]"}}function a(e){return e===undefined}function f(e){return function(t){return t[e]}}function l(e,t){return function(n){return e(t(n))}}function c(e,t){var n=t?e.value().map(t):e.domain();return n[0]instanceof Date?b.time.scale().domain(b.extent(n)):typeof n[0]=="string"?b.scale.ordinal().domain(n):b.scale.linear().domain(b.extent(n))}function h(e){var t=w.baseSize(),n=w.margins();return{top:t[0]*(e.top?+e.top():0)+n,left:t[1]*(e.left?+e.left():0)+n,height:t[0]*+e.height()-n*2,width:t[1]*+e.width()-n*2}}var p=Function.prototype.call.bind(Array.prototype.slice),d=Object.keys,v=u("function"),m=u("object"),g=Array.isArray,y=this,b=y.d3,w={version:"0.1.0"},E={baseWidth:1,baseHeight:1,margins:0};t(w,E,d(E)),n(w,"baseSize",["baseHeight","baseWidth"]),r(w),w.config=function(e){return arguments.length?s(w,e):i({},E)};var S=[];w.defineElement=function(r,i){if(w[r])throw new Error("Attempting to define element that already exists or is protected: '"+r+"'");S.push(r),w[r]=function(o){var u,a={height:200,width:200},f=function(t){var n=h(f),i=e(t).append("div");return i.classed("element element-"+r,!0).style("height",n.height+"px").style("width",n.width+"px"),f.header()&&i.append("header").html(f.header()),i.append("div").classed("content",!0).call(u),f.footer()&&i.append("footer").html(f.footer()),f};return f.render=f,t(f,a,["metric","width","height","header","footer"]),n(f,"size",["height","width"]),u=i(f),s(f,o)}},w.group=function(){var i,s=[];return i=function(t){var n=e(t).append("div").classed("informant group",!0).style("position","relative");return s.forEach(function(e){var t=h(e),r=n.append("div");r.style("position","absolute").style("top",t.top+"px").style("left",t.left+"px").classed("wrapper",!0).call(e),e.id()&&r.attr("id",e.id()),e.classes()&&r.classed(e.classes(),!0)}),n},S.forEach(function(e){i[e]=function(r){var o=w[e](r),u={top:0,left:0};return s.push(o),t(o,u,["id","classes","top","left"]),n(o,"position",["top","left"]),o.end=function(){return i},o}}),r(i),i.render=i,i},w.defineElement("number",function(e){return function(t){var n=e.metric(),r=t.append("div").classed("value",!0);n.on("change",function(){r.text(n.value())})}}),w.defineElement("list",function(e){var n={numbered:!1,accessor:f("key")};return t(e,n,["numbered","accessor"]),function(t){var n=e.metric(),r=e.accessor(),i=t.append(e.numbered()?"ol":"ul");n.on("change",function(){var t=i.selectAll("li").data(n.value());t.enter().append("li"),t.text(r).classed("selected",function(e){return r(e)===n.filter()}).on("click",function(e){n.filter(r(e)===n.filter()?null:e.key),dc&&dc.redrawAll()}),t.exit().remove()})}}),w.defineElement("graph",function(e){return function(t){var n=e.metric(),r=h(e),i=t.append("div").classed("chart line-chart",!0);n.on("ready",function(){var t=dc.lineChart(i.node()).width(r.width-40).height(r.height-140).margins({top:10,right:10,bottom:30,left:50}).dimension(n.dimension()).group(n.group()).x(c(n));t.elasticY(!0).renderHorizontalGridLines(!0).brushOn(!1).renderArea(!0),t.xAxis().ticks(b.time.days).tickFormat(function(e){return e.getMonth()+1+"/"+e.getDate()}),t.render()})}}),w.defineElement("bar",function(e){return function(t){var n=e.metric(),r=h(e),i=t.append("div").classed("chart bar-chart",!0);n.on("ready",function(){var t=dc.barChart(i.node()).width(r.width-40).height(r.height-140).margins({top:10,right:10,bottom:30,left:60}).dimension(n.dimension()).group(n.group()).x(c(n)).xUnits(dc.units.ordinal);t.elasticY(!0).centerBar(!0).renderHorizontalGridLines(!0).brushOn(!1),t.render()})}}),w.defineElement("pie",function(e){var n={donut:!1};return t(e,n,["donut"]),function(t){var n=e.metric(),r=h(e),i=t.append("div").classed("chart pie-chart",!0);n.on("ready",function(){var s=r.width/2-60,o=s*2+6,u=b.scale.linear().domain([0,n.group().size()-1]).range(["rgba(0,0,0,0.2)","rgba(0,0,0,0.7)"]),a=dc.pieChart(i.node()).width(o).height(o).radius(s).dimension(n.dimension()).group(n.group());e.donut()&&a.innerRadius(s/3),a.minAngleForLabel(.05);var f=[];for(var l=0,c=n.group().size();l<c;l++)f.push(l);a.colors(f.map(u)),a.render()})}}),w.defineElement("bubble",function(e){var n=f("value"),r={keyAccessor:"key",valueAccessor:"value",radiusAccessor:"radius"};return t(e,r,["keyAccessor","valueAccessor","radiusAccessor"]),function(t){var r=e.metric(),i=h(e),s=l(f(e.keyAccessor()),n),o=l(f(e.valueAccessor()),n),u=l(f(e.radiusAccessor()),n),a=t.append("div").classed("chart bubble-chart",!0);r.on("ready",function(){var t=dc.bubbleChart(a.node()).width(i.width-40).height(i.height-140).margins({top:10,right:50,bottom:30,left:50}).dimension(r.dimension()).group(r.group()).x(c(r,s)).y(c(r,o)).r(c(r,u)).keyAccessor(s).valueAccessor(o).radiusValueAccessor(u);t.colors(b.scale.category20c()).maxBubbleRelativeSize(.09).renderLabel(!0).elasticX(!0).elasticY(!0).renderHorizontalGridLines(!0).renderVerticalGridLines(!0).brushOn(!1),t.render()})}}),y.informant=w})();