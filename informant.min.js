(function(){function e(e){return e instanceof f.selection?e:f.select(e)}function t(e,t,n){return function(r){return arguments.length?(t[e]=r,n):t[e]}}function n(e,n,r){r.forEach(function(r){e[r]=t(r,n,e)})}function r(e,t){h(t).forEach(function(n){e[n]=t[n]})}function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(e){var t=i(e);return function(e){return Object.prototype.toString.call(e)==="[object "+t+"]"}}function o(e){return e===undefined}function u(e){return function(t){return t[e]}}var a=this,f=a.d3,l={version:"0.1.0"},c=[];l.defineElement=function(t,r){if(l[t])throw new Error("Attempting to define element that already exists or is protected: '"+t+"'");c.push(t),l[t]=function(i){var s,o={height:200,width:200},u=function(n){var r=e(n).append("div").classed("element element-"+t,!0).style("height",u.height()+"px").style("width",u.width()+"px");return u.header()&&r.append("header").html(u.header()),r.append("div").classed("content",!0).call(s),u.footer()&&r.append("footer").html(u.footer()),u};return u.render=u,n(u,o,["metric","width","height","header","footer"]),u.size=function(e,t){return arguments.length?u.height(e).width(t):[u.height(),u.width()]},s=r(u),d(i)&&h(i).forEach(function(e){p(this[e])&&this[e](i[e])}),u}},l.group=function(){var t,r=[];return t=function(t){var n=e(t).append("div").classed("group",!0).style("position","relative");return r.forEach(function(e){n.append("div").classed("element-wrapper",!0).style("position","absolute").style("top",e.top()+"px").style("left",e.left()+"px").call(e)}),n},c.forEach(function(e){t[e]=function(i){var s=l[e](i),o={top:0,left:0};return r.push(s),n(s,o,["top","left"]),s.position=function(e,t){return arguments.length?s.top(e).left(t):[s.top(),s.left()]},s.end=function(){return t},s}}),t.render=t,t};var h=Object.keys,p=s("function"),d=s("object");l.defineElement("number",function(e){return function(t){var n=e.metric(),r=t.append("div").classed("value",!0);n.on("change",function(){r.text(n.value())})}}),l.defineElement("list",function(e){var t={numbered:!1,accessor:u("key")};return n(e,t,["numbered","accessor"]),function(t){var n=e.metric(),r=e.accessor(),i=t.append(e.numbered()?"ol":"ul");n.on("change",function(){var t=i.selectAll("li").data(n.value());t.enter().append("li"),t.text(r).classed("selected",function(e){return r(e)===n.filter()}).on("click",function(e){n.filter(r(e)===n.filter()?null:e.key),dc&&dc.redrawAll()}),t.exit().remove()})}}),l.defineElement("graph",function(e){return function(t){function n(){var e=r.domain(),t=e[0]instanceof Date?f.time.scale():f.scale.linear();return t.domain(f.extent(e))}var r=e.metric(),i=t.append("div").classed("chart line-chart",!0);r.on("ready",function(){var s=dc.lineChart(i.node()).width(e.width()-40).height(e.height()-140).margins({top:10,right:10,bottom:30,left:50}).dimension(r.dimension()).group(r.group()).x(n());s.elasticY(!0).renderHorizontalGridLines(!0).brushOn(!1).renderArea(!0),s.xAxis().ticks(f.time.days).tickFormat(function(e){return e.getMonth()+1+"/"+e.getDate()}),s.render()})}}),l.defineElement("pie",function(e){return function(t){var n=e.metric(),r=t.append("div").classed("chart pie-chart",!0);n.on("ready",function(){var i=f.scale.linear().domain([0,n.group().size()-1]).range(["rgba(0,0,0,0.2)","rgba(0,0,0,0.7)"]),s=dc.pieChart(r.node()).width(e.width()).height(e.width()).radius(e.width()/2-2).innerRadius(e.width()/5).dimension(n.dimension()).group(n.group()),o=[];for(var u=0,a=n.group().size();u<a;u++)o.push(u);s.colors(o.map(i)),s.render()})}}),a.informant=l})();