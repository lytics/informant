(function(){function e(e){return e instanceof a.selection?e:a.select(e)}function t(e,t,n){return function(r){return arguments.length?(t[e]=r,n):t[e]}}function n(e,n,r){r.forEach(function(r){e[r]=t(r,n,e)})}function r(e,t){c(t).forEach(function(n){e[n]=t[n]})}function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(e){var t=i(e);return function(e){return Object.prototype.toString.call(e)==="[object "+t+"]"}}function o(e){return e===undefined}var u=this,a=u.d3,f={version:"0.1.0"},l=[];f.defineElement=function(t,r){if(f[t])throw new Error("Attempting to define element that already exists or is protected: '"+t+"'");l.push(t),f[t]=function(i){var s,o={height:200,width:200},u=function(n){var r=e(n).append("div").classed("element element-"+t,!0).style("height",u.height()+"px").style("width",u.width()+"px");return u.header()&&r.append("header").html(u.header()),r.append("div").classed("content",!0).call(s),u.footer()&&r.append("footer").html(u.footer()),u};return u.render=u,n(u,o,["metric","width","height","header","footer"]),u.size=function(e,t){return arguments.length?u.height(e).width(t):[u.height(),u.width()]},s=r(u),p(i)&&c(i).forEach(function(e){h(this[e])&&this[e](i[e])}),u}},f.group=function(){var t,r=[];return t=function(t){var n=e(t).append("div").classed("group",!0).style("position","relative");return r.forEach(function(e){n.append("div").classed("element-wrapper",!0).style("position","absolute").style("top",e.top()+"px").style("left",e.left()+"px").call(e)}),n},l.forEach(function(e){t[e]=function(i){var s=f[e](i),o={top:0,left:0};return r.push(s),n(s,o,["top","left"]),s.position=function(e,t){return arguments.length?s.top(e).left(t):[s.top(),s.left()]},s.end=function(){return t},s}}),t.render=t,t};var c=Object.keys,h=s("function"),p=s("object");f.defineElement("number",function(e){return function(t){var n=e.metric(),r=t.append("div").classed("value",!0);n.on("change",function(){r.text(n.value())})}}),f.defineElement("graph",function(e){return function(t){function n(){var e=r.domain(),t=e[0]instanceof Date?a.time.scale():a.scale.linear();return t.domain(a.extent(e))}var r=e.metric(),i=t.append("div").classed("chart line-chart",!0);r.on("ready",function(){var s=dc.lineChart(i.node()).width(e.width()-40).height(e.height()-140).margins({top:10,right:10,bottom:30,left:50}).dimension(r.dimension()).group(r.group()).x(n());s.elasticY(!0).renderHorizontalGridLines(!0).brushOn(!1).renderArea(!0),s.xAxis().ticks(a.time.days).tickFormat(function(e){return e.getMonth()+1+"/"+e.getDate()}),s.render()})}}),f.defineElement("pie",function(e){return function(t){var n=e.metric(),r=t.append("div").classed("chart pie-chart",!0);n.on("ready",function(){var i=a.scale.linear().domain([0,n.group().size()-1]).range(["rgba(0,0,0,0.2)","rgba(0,0,0,0.7)"]),s=dc.pieChart(r.node()).width(e.width()).height(e.width()).radius(e.width()/2-2).innerRadius(e.width()/5).dimension(n.dimension()).group(n.group()),o=[];for(var u=0,f=n.group().size();u<f;u++)o.push(u);s.colors(o.map(i)),s.render()})}}),u.informant=f})();