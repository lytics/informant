(function(){function e(e){return e instanceof c.selection?e:c.select(e)}function t(e,t,n){return function(r){return arguments.length?(t[e]=r,n):t[e]}}function n(e,n,r){r.forEach(function(r){e[r]=t(r,n,e)})}function r(e,t){d(t).forEach(function(n){e[n]=t[n]})}function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(e){var t=i(e);return function(e){return Object.prototype.toString.call(e)==="[object "+t+"]"}}function o(e){return e===undefined}function u(e){return function(t){return t[e]}}function a(e,t){return function(n){return e(t(n))}}function f(e,t){var n=t?e.value().map(t):e.domain();return n[0]instanceof Date?c.time.scale().domain(c.extent(n)):typeof n[0]=="string"?c.scale.ordinal().domain(n):c.scale.linear().domain(c.extent(n))}var l=this,c=l.d3,h={version:"0.1.0"},p=[];h.defineElement=function(t,r){if(h[t])throw new Error("Attempting to define element that already exists or is protected: '"+t+"'");p.push(t),h[t]=function(i){var s,o={height:200,width:200},u=function(n){var r=e(n).append("div").classed("element element-"+t,!0).style("height",u.height()+"px").style("width",u.width()+"px");return u.header()&&r.append("header").html(u.header()),r.append("div").classed("content",!0).call(s),u.footer()&&r.append("footer").html(u.footer()),u};return u.render=u,n(u,o,["metric","width","height","header","footer"]),u.size=function(e,t){return arguments.length?u.height(e).width(t):[u.height(),u.width()]},s=r(u),m(i)&&d(i).forEach(function(e){v(this[e])&&this[e](i[e])}),u}},h.group=function(){var t,r=[];return t=function(t){var n=e(t).append("div").classed("group",!0).style("position","relative");return r.forEach(function(e){n.append("div").classed("element-wrapper",!0).style("position","absolute").style("top",e.top()+"px").style("left",e.left()+"px").call(e)}),n},p.forEach(function(e){t[e]=function(i){var s=h[e](i),o={top:0,left:0};return r.push(s),n(s,o,["top","left"]),s.position=function(e,t){return arguments.length?s.top(e).left(t):[s.top(),s.left()]},s.end=function(){return t},s}}),t.render=t,t};var d=Object.keys,v=s("function"),m=s("object");h.defineElement("number",function(e){return function(t){var n=e.metric(),r=t.append("div").classed("value",!0);n.on("change",function(){r.text(n.value())})}}),h.defineElement("list",function(e){var t={numbered:!1,accessor:u("key")};return n(e,t,["numbered","accessor"]),function(t){var n=e.metric(),r=e.accessor(),i=t.append(e.numbered()?"ol":"ul");n.on("change",function(){var t=i.selectAll("li").data(n.value());t.enter().append("li"),t.text(r).classed("selected",function(e){return r(e)===n.filter()}).on("click",function(e){n.filter(r(e)===n.filter()?null:e.key),dc&&dc.redrawAll()}),t.exit().remove()})}}),h.defineElement("graph",function(e){return function(t){var n=e.metric(),r=t.append("div").classed("chart line-chart",!0);n.on("ready",function(){var i=dc.lineChart(r.node()).width(e.width()-40).height(e.height()-140).margins({top:10,right:10,bottom:30,left:50}).dimension(n.dimension()).group(n.group()).x(f(n));i.elasticY(!0).renderHorizontalGridLines(!0).brushOn(!1).renderArea(!0),i.xAxis().ticks(c.time.days).tickFormat(function(e){return e.getMonth()+1+"/"+e.getDate()}),i.render()})}}),h.defineElement("bar",function(e){return function(t){var n=e.metric(),r=t.append("div").classed("chart bar-chart",!0);n.on("ready",function(){var i=dc.barChart(r.node()).width(e.width()-40).height(e.height()-140).margins({top:10,right:10,bottom:30,left:60}).dimension(n.dimension()).group(n.group()).x(f(n)).xUnits(dc.units.ordinal);i.elasticY(!0).centerBar(!0).renderHorizontalGridLines(!0).brushOn(!1),i.render()})}}),h.defineElement("pie",function(e){var t={donut:!1};return n(e,t,["donut"]),function(t){var n=e.metric(),r=t.append("div").classed("chart pie-chart",!0);n.on("ready",function(){var i=e.width()/2-60,s=i*2+6,o=c.scale.linear().domain([0,n.group().size()-1]).range(["rgba(0,0,0,0.2)","rgba(0,0,0,0.7)"]),u=dc.pieChart(r.node()).width(s).height(s).radius(i).dimension(n.dimension()).group(n.group());e.donut()&&u.innerRadius(i/3),u.minAngleForLabel(.05);var a=[];for(var f=0,l=n.group().size();f<l;f++)a.push(f);u.colors(a.map(o)),u.render()})}}),h.defineElement("bubble",function(e){var t=u("value"),r={keyAccessor:"key",valueAccessor:"value",radiusAccessor:"radius"};return n(e,r,["keyAccessor","valueAccessor","radiusAccessor"]),function(n){var r=e.metric(),i=a(u(e.keyAccessor()),t),s=a(u(e.valueAccessor()),t),o=a(u(e.radiusAccessor()),t),l=n.append("div").classed("chart bubble-chart",!0);r.on("ready",function(){var n=dc.bubbleChart(l.node()).width(e.width()-40).height(e.height()-140).margins({top:10,right:50,bottom:30,left:50}).dimension(r.dimension()).group(r.group()).x(f(r,i)).y(f(r,s)).r(f(r,o)).keyAccessor(i).valueAccessor(s).radiusValueAccessor(o);n.colors(c.scale.category20c()).maxBubbleRelativeSize(.09).renderLabel(!0).elasticX(!0).elasticY(!0).renderHorizontalGridLines(!0).renderVerticalGridLines(!0).brushOn(!1),n.render()})}}),l.informant=h})();